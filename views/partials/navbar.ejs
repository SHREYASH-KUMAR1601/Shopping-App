<nav class="navbar navbar-expand-lg navbar-dark fixed-top shadow-sm" style="background-color: #0077b6;">
  <div class="container">
    <!-- Brand -->
    <a class="navbar-brand d-flex align-items-center" href="/products">
      <i class="fas fa-shopping-basket me-2" style="font-size: 1.7rem;"></i>
      <span class="fw-bold fs-5">Shoppers</span>
    </a>

    <!-- Toggler for mobile view -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Collapsible part of the navbar -->
    <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <!-- Home link -->
        <li class="nav-item">
          <a class="nav-link active fw-semibold" aria-current="page" href="/">Home</a>
        </li>

        <!-- Products link -->
        <li class="nav-item">
          <a class="nav-link fw-semibold" href="/products">Products</a>
        </li>

        <!-- Conditionally rendered "New" link -->
        <% if(currentUser && currentUser.role === 'seller'){ %>
          <li class="nav-item">
            <a class="nav-link fw-semibold" href="/products/new">New</a>
          </li>
        <% } %>
      </ul>

      <!-- Right-aligned navbar items -->
      <div class="navbar-nav ms-auto">
        <!-- If no current user, show login link -->
        <% if(!currentUser){ %>
          <a href="/login" class="nav-link fw-semibold">Login</a>
        <% } else { %>
          <!-- Display user's name and cart if logged in -->
          <a href="#" class="nav-link fw-semibold text-capitalize">Hello, <%= currentUser.username %></a>

          <!-- Cart icon with badge showing number of items -->
          <a href="/user/cart" class="nav-link position-relative">
            <i class="fas fa-shopping-cart fs-5"></i>
            <% if (currentUser.cart.length > 0) { %>
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                <%= currentUser.cart.length %>
              </span>
            <% } %>
          </a>

          <!-- Logout link -->
          <a href="/logout" class="nav-link fw-semibold">Logout</a>
        <% } %>
      </div>
    </div>
  </div>
</nav>
